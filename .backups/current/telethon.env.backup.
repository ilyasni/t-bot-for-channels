############################################################
# Telegram Channel Parser - Service Specific Configuration
############################################################

############################################################
# PARSER SETTINGS
############################################################

# [required] Parser Configuration
PARSER_INTERVAL_MINUTES=30
MAX_POSTS_PER_CHANNEL=50

# [required] Server Settings
HOST=0.0.0.0
PORT=8010

############################################################
# DEBUG & LOGGING SETTINGS
############################################################

# [optional] Debug Configuration
DEBUG_LOGS=false
LOG_INCOMING_UPDATES=false

############################################################
# AUTHENTICATION SETTINGS
############################################################

# [required] Web Authentication
AUTH_BASE_URL=https://telegram-auth.produman.studio

############################################################
# TAGGING PROVIDER CONFIGURATION
############################################################

# [required] Tagging Provider Selection
TAGGING_PROVIDER=gigachat
TAGGING_FALLBACK_OPENROUTER=true

# [required] GigaChat Configuration
GIGACHAT_PROXY_URL=http://gpt2giga-proxy:8090
GIGACHAT_MODEL=GigaChat-Lite

# [required] OpenRouter Configuration (Fallback)
OPENROUTER_MODEL=google/gemini-2.0-flash-exp:free

# [optional] Tagging Settings
TAGGING_BATCH_SIZE=10
TAGGING_MAX_RETRIES=3
TAGGING_RETRY_DELAY=2.0
TAGGING_MAX_ATTEMPTS=5

############################################################
# RAG SERVICE CONFIGURATION
############################################################

# [required] RAG Service Settings
RAG_SERVICE_URL=http://rag-service:8020
RAG_SERVICE_ENABLED=true

# [optional] RAG Configuration
RAG_TOP_K=10
RAG_MIN_SCORE=0.7
RAG_CONTEXT_WINDOW=4000
RAG_TEMPERATURE=0.3

# [optional] Embeddings Configuration
GIGACHAT_ENABLED=true
EMBEDDING_MAX_TOKENS_GIGACHAT=1536
EMBEDDING_OVERLAP_TOKENS_GIGACHAT=256
EMBEDDING_MAX_TOKENS_FALLBACK=384
EMBEDDING_OVERLAP_TOKENS_FALLBACK=64

############################################################
# EXTERNAL SERVICES INTEGRATION
############################################################

# [required] Redis Cache
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_EMBEDDING_TTL=86400
REDIS_RAG_QUERY_TTL=3600

# [required] SearXNG Search
SEARXNG_URL=http://searxng:8080
SEARXNG_MAX_RESULTS=5
SEARXNG_ENABLED=true

# [optional] Crawl4AI Web Scraping
CRAWL4AI_ENABLED=true
CRAWL4AI_URL=http://crawl4ai:11235
CRAWL4AI_WORD_THRESHOLD=100
CRAWL4AI_TIMEOUT=30

# [optional] Ollama Local LLM
OLLAMA_URL=http://ollama:11434
OLLAMA_DEFAULT_MODEL=llama3.2
OLLAMA_TIMEOUT=60
OLLAMA_ENABLED=true

# [optional] Flowise AI Workflows
FLOWISE_URL=https://flowise.produman.studio
FLOWISE_ENABLED=false

############################################################
# MASTER CREDENTIALS (SIMPLIFIED AUTH)
############################################################

# [required] Master Telegram Credentials
MASTER_API_ID=9602513
MASTER_API_HASH=d72f161ad90794db968e19cc24e77efa

# [required] Admin Configuration
ADMIN_TELEGRAM_IDS=8124731874,139883458
REGISTRATION_MODE=invite

# [optional] Subscription Settings
DEFAULT_SUBSCRIPTION=free
DEFAULT_MAX_CHANNELS=3
TRIAL_DURATION_DAYS=7

############################################################
# N8N INTEGRATION SETTINGS
############################################################

# [optional] N8N Webhook URLs
N8N_GROUP_DIGEST_WEBHOOK=http://n8n:5678/webhook/group-digest
N8N_MENTION_ANALYZER_WEBHOOK=http://n8n:5678/webhook/mention-analyzer
N8N_WEBHOOK_URL=http://n8n:5678

# [optional] N8N Timeouts
N8N_DIGEST_TIMEOUT=120
N8N_MENTION_TIMEOUT=60
DIGEST_MAX_MESSAGES=200

############################################################
# VOICE TRANSCRIPTION SETTINGS
############################################################

# [required] SaluteSpeech API Configuration
SALUTESPEECH_CLIENT_ID=0199deda-86df-7467-b2be-7f3d6d12541b
SALUTESPEECH_CLIENT_SECRET=d944b976-a759-4fc8-8297-13258aa37a82
SALUTESPEECH_SCOPE=SALUTE_SPEECH_PERS
SALUTESPEECH_URL=https://smartspeech.sber.ru/rest/v1

# [optional] Voice Settings
VOICE_TRANSCRIPTION_ENABLED=true
VOICE_MAX_DURATION_SEC=60
VOICE_CACHE_TTL=86400
VOICE_AI_CLASSIFIER_ENABLED=true

############################################################
# NEO4J GRAPH DATABASE SETTINGS
############################################################

# [required] Neo4j Configuration
NEO4J_ENABLED=true
NEO4J_URI=bolt://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=5L0Dp8GyQie19RBdhQTYFL5BLgcpDBau
NEO4J_AUTO_INDEX=true

############################################################
# DATA RETENTION & CLEANUP SETTINGS
############################################################

# [optional] Data Retention
DATA_RETENTION_DAYS=120
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE=0 3 * * *

############################################################
# HYBRID SEARCH CONFIGURATION
############################################################

# [optional] Hybrid Search Settings
USE_HYBRID_SEARCH=false
HYBRID_SEARCH_PERCENTAGE=10
GRAPH_WEIGHT=0.3
ENABLE_GRAPH_EXPANSION=true

# [optional] Query Expansion
USE_QUERY_EXPANSION=false
QUERY_EXPANSION_PERCENTAGE=0
QUERY_EXPANSION_MAX_TERMS=3

############################################################
# GRAPH CACHE CONFIGURATION
############################################################

# [optional] Graph Cache Settings
GRAPH_CACHE_ENABLED=true
GRAPH_CACHE_USER_INTERESTS_TTL=3600
GRAPH_CACHE_TRENDING_TTL=21600
GRAPH_CACHE_POST_CONTEXT_TTL=86400

############################################################
# ADMIN API CONFIGURATION
############################################################

# [optional] Admin API Settings
ADMIN_API_KEY=
LOG_INCOMING_UPDATES=false

############################################################
# LANGCHAIN INTEGRATION SETTINGS
############################################################

# [optional] LangChain Settings
USE_LANGCHAIN_DIRECT=true
USE_DIGEST_V2=true
GIGACHAT_BASE_URL=http://localhost:8090/v1
GIGACHAT_TIMEOUT=60

############################################################
# EVALUATION SYSTEM SETTINGS
############################################################

# [optional] Evaluation Settings
EVALUATION_ENABLED=true
EVALUATION_SAMPLE_RATE=1.0
