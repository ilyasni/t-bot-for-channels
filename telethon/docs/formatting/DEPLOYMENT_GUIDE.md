# üöÄ Deployment Guide - HTML Formatting Update

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
**–î–∞—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** HTML Formatting v1.0

---

## üìã Pre-deployment Checklist

- [x] ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (42/42)
- [x] ‚úÖ Linter –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞ (0 –æ—à–∏–±–æ–∫)
- [x] ‚úÖ –ö–æ–¥ —Ä–µ–≤—å—é –∑–∞–≤–µ—Ä—à–µ–Ω
- [x] ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã
- [x] ‚úÖ Rollback –ø–ª–∞–Ω –≥–æ—Ç–æ–≤

---

## üîß Deployment Steps

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /home/ilyasni/n8n-server/n8n-installer

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
cd telethon
python3 -m pytest tests/test_telegram_formatter.py --no-cov -q

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ linter
# (—É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å)

# 4. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ git)
git add telethon/telegram_formatter.py
git add telethon/bot.py
git add telethon/rag_service/scheduler.py
git add telethon/rag_service/digest_generator.py
git add telethon/rag_service/ai_digest_generator.py
git add telethon/tests/test_telegram_formatter.py
git commit -m "feat: Full HTML formatting support for Telegram

- Enhanced markdown_to_html() with blockquote, expandable, spoilers
- Added format_rag_answer() for RAG responses with sources
- Added format_long_digest() for long content with expandable
- Fixed scheduler.py to always use HTML parse_mode
- Updated digest generators to use HTML tags
- Added 15 new tests (42/42 passing)
- Created documentation and examples

BREAKING: None (backward compatible)
TESTS: 42/42 passing
LINTER: No errors"

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
cd /home/ilyasni/n8n-server/n8n-installer
docker-compose restart telethon

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs telethon --tail 100 -f
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
‚úÖ TelegramBot –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å Persistence
‚úÖ GroupDigestGenerator –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ GroupMonitorService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
...
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

```bash
# –®–∞–≥ 1: Backup —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
cd /home/ilyasni/n8n-server/n8n-installer/telethon
cp telegram_formatter.py telegram_formatter.py.backup
cp bot.py bot.py.backup
cp rag_service/scheduler.py rag_service/scheduler.py.backup

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
docker ps | grep telethon

# –®–∞–≥ 3: Graceful restart
docker-compose stop telethon
sleep 5
docker-compose up -d telethon

# –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—Å–∫–∞
docker logs telethon --tail 50 -f

# –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ health (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω healthcheck)
docker inspect telethon | grep -A 5 Health

# –®–∞–≥ 6: –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start –±–æ—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç
```

---

## üß™ Post-deployment Testing

### 1. –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

```bash
# –í Telegram –±–æ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:
/start
/help
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 2. RAG –æ—Ç–≤–µ—Ç—ã

```bash
# –í Telegram –±–æ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:
/ask –ß—Ç–æ —Ç–∞–∫–æ–µ Python?
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [x] –û—Ç–≤–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤ —Ä–∞–±–æ—Ç–∞—é—Ç)
- [x] –ï—Å—Ç—å —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫ "üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏"
- [x] –ö–ª–∏–∫ –ø–æ –±–ª–æ–∫—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- [x] –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã

### 3. –î–∞–π–¥–∂–µ—Å—Ç—ã

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞–π–¥–∂–µ—Å—Ç –∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è scheduled
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [x] –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤ HTML (`<b>` –≤–º–µ—Å—Ç–æ **) 
- [x] –¢–µ–≥–∏ –≤ `<code>` –±–ª–æ–∫–∞—Ö
- [x] –î–ª–∏–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã –≤ expandable
- [x] –°—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### 4. Groups —É–ø–æ–º–∏–Ω–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –≥—Ä—É–ø–ø–µ
@–≤–∞—à_username —Ç–µ—Å—Ç
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ blockquote
- [x] Urgency emoji –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [x] –°—Å—ã–ª–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é" —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìä Monitoring

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 24 —á–∞—Å–æ–≤:**

1. **Telegram API –æ—à–∏–±–∫–∏**
   ```bash
   docker logs telethon | grep "parse entities"
   docker logs telethon | grep "HTML"
   ```
   
   **–û–∂–∏–¥–∞–µ–º–æ:** 0 –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

2. **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**
   ```bash
   docker logs telethon | grep "‚úÖ.*–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"
   ```
   
   **–û–∂–∏–¥–∞–µ–º–æ:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

3. **–ñ–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - –ù–µ—Ç –∂–∞–ª–æ–± –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - Expandable –±–ª–æ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –°–ø–æ–π–ª–µ—Ä—ã —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

### Dashboard (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Grafana)

**Metrics to watch:**
- `telegram_messages_sent_total` - –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏
- `telegram_api_errors_total{error="parse"}` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0
- `telegram_formatting_errors_total` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0

---

## üîÑ Rollback Process

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:**
- –û—à–∏–±–∫–∏ "Can't parse entities" –≤ –ª–æ–≥–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ —Å–ª–æ–º–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Expandable –±–ª–æ–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç:**

```bash
cd /home/ilyasni/n8n-server/n8n-installer/telethon

# 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
cp telegram_formatter.py.backup telegram_formatter.py
cp bot.py.backup bot.py
cp rag_service/scheduler.py.backup rag_service/scheduler.py

# 2. –ò–ª–∏ –æ—Ç–∫–∞—Ç —á–µ—Ä–µ–∑ git
git checkout HEAD~1 -- telegram_formatter.py
git checkout HEAD~1 -- bot.py
git checkout HEAD~1 -- rag_service/scheduler.py
git checkout HEAD~1 -- rag_service/digest_generator.py
git checkout HEAD~1 -- rag_service/ai_digest_generator.py

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
cd /home/ilyasni/n8n-server/n8n-installer
docker-compose restart telethon

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs telethon --tail 50
```

**–í—Ä–µ–º—è –æ—Ç–∫–∞—Ç–∞:** ~2 –º–∏–Ω—É—Ç—ã

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Can't parse entities" –æ—à–∏–±–∫–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
```
ERROR: Can't parse entities: Can't find end of the entity starting at byte offset 123
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ—à–∏–±–∫–∞–º–∏
docker logs telethon | grep -A 5 "Can't parse"
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–π—Ç–∏ –≤ –∫–æ–¥–µ –º–µ—Å—Ç–æ –≥–¥–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `markdownify()` –∏–ª–∏ `format_*()` —Ñ—É–Ω–∫—Ü–∏–∏
3. –ï—Å–ª–∏ –Ω–µ—Ç - –æ–±–µ—Ä–Ω—É—Ç—å –≤ `markdownify()`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Expandable –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:** –ë–ª–æ–∫–∏ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç (`expand` –≤–º–µ—Å—Ç–æ `expandable`)
- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è Telegram –∫–ª–∏–µ–Ω—Ç–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ë–ª–æ–∫ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π (< 3 —Å—Ç—Ä–æ–∫–∏)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTML: `<blockquote expandable>` (–∏–º–µ–Ω–Ω–æ expandable)
2. –ü–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–∏—Ç—å Telegram
3. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è expandable - 3 —Å—Ç—Ä–æ–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–ø–æ–π–ª–µ—Ä—ã –Ω–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** –¢–µ–∫—Å—Ç –≤–∏–¥–µ–Ω —Å—Ä–∞–∑—É

**–í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–≥

**–†–µ—à–µ–Ω–∏–µ:**
```html
<!-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ -->
<tg-spoiler>—Å–µ–∫—Ä–µ—Ç</tg-spoiler>

<!-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ -->
<spoiler>—Å–µ–∫—Ä–µ—Ç</spoiler>
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Code blocks –±–µ–∑ –ø–æ–¥—Å–≤–µ—Ç–∫–∏

**–°–∏–º–ø—Ç–æ–º—ã:** –ö–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ –±–µ–∑ —Ü–≤–µ—Ç–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** Telegram –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ HTML

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç ‚úÖ
- –°–µ—Ä—ã–π —Ñ–æ–Ω ‚úÖ
- –ú–µ—Ç–∫–∞ —è–∑—ã–∫–∞ —Å–Ω–∏–∑—É ‚úÖ
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ ‚ùå (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Telegram)

---

## üìû Support Contacts

**–í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```bash
   docker logs telethon --tail 200 > /tmp/telethon_error.log
   ```

2. **–û—Ç–∫–∞—Ç–∏—Ç—å—Å—è (—Å–º. Rollback Process –≤—ã—à–µ)**

3. **–°–æ–∑–¥–∞—Ç—å issue —Å –ª–æ–≥–∞–º–∏**

---

## üìà Success Criteria

**–î–µ–ø–ª–æ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º –µ—Å–ª–∏:**

- [x] ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- [x] ‚úÖ RAG –æ—Ç–≤–µ—Ç—ã —Å expandable –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] ‚úÖ –î–∞–π–¥–∂–µ—Å—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] ‚úÖ Groups —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å blockquote —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML –≤ –ª–æ–≥–∞—Ö (24—á)
- [x] ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ï—Å–ª–∏ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:** –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω! üéâ

---

## üîÆ Future Improvements (Optional)

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ:**

1. **–ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è expandable**
   - –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–ª–∏–∫–∞—é—Ç –Ω–∞ expandable
   - –ö–∞–∫–∏–µ –±–ª–æ–∫–∏ —á–∞—â–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è

2. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Expandable vs –æ–±—ã—á–Ω—ã–π blockquote
   - –í–ª–∏—è–Ω–∏–µ –Ω–∞ engagement

3. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ max_visible –¥–ª—è digest
   - –í—ã–±–æ—Ä –º–µ–∂–¥—É expandable/–æ–±—ã—á–Ω—ã–º blockquote

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –°–∂–∞—Ç–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

---

**Deployment prepared by:** AI Assistant  
**Date:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**Status:** ‚úÖ Ready for Production

