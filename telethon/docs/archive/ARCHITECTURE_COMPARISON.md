# üèóÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä: Immediate Retry vs Task Scheduler

**–î–∞—Ç–∞:** 11 –æ–∫—Ç—è–±—Ä—è 2025  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–±–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è retry –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä Comparison Matrix

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Immediate Retry (‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ) | Task Scheduler (Celery) | –ü–æ–±–µ–¥–∏—Ç–µ–ª—å |
|----------|----------------------------------|-------------------------|------------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å | ‚≠ê‚≠ê Celery + Redis | ‚úÖ Immediate |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | ‚≠ê‚≠ê‚≠ê –ó–∞–¥–µ—Ä–∂–∫–∞ 1-5 –º–∏–Ω | ‚úÖ Immediate |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê –î–æ 200 –ø–æ—Å—Ç–æ–≤/—á–∞—Å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –¢—ã—Å—è—á–∏ –ø–æ—Å—Ç–æ–≤ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç |
| **–û—Ç–ª–∞–¥–∫–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –õ–∏–Ω–µ–π–Ω—ã–µ –ª–æ–≥–∏ | ‚≠ê‚≠ê –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ | ‚úÖ Immediate |
| **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | ‚≠ê‚≠ê 3+ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | ‚úÖ Immediate |
| **–ì–∏–±–∫–æ—Å—Ç—å retry** | ‚≠ê‚≠ê‚≠ê –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –õ—é–±–∞—è –ª–æ–≥–∏–∫–∞ | ‚ö†Ô∏è Scheduler |
| **–ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚≠ê‚≠ê –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–µ—Ä | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ | ‚ö†Ô∏è Scheduler |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê $0 | ‚≠ê‚≠ê‚≠ê –î–æ–ø. —Ä–µ—Å—É—Ä—Å—ã | ‚úÖ Immediate |

## üéØ –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (self-hosted, 1-5 users)

**Immediate Retry:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5) - **–ò–¥–µ–∞–ª—å–Ω–æ**  
**Task Scheduler:** ‚≠ê‚≠ê (2/5) - –û–≤–µ—Ä–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥

---

## üìà –ö–æ–≥–¥–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Task Scheduler?

### –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏:

```python
if (
    posts_per_hour > 500 or
    active_users > 20 or
    parser_time > 120  # —Å–µ–∫—É–Ω–¥
):
    print("üöÄ –í—Ä–µ–º—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Task Scheduler!")
```

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# 1. –í—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–∞
curl http://localhost:8010/stats | jq '.avg_parse_time'
# –ï—Å–ª–∏ > 2 –º–∏–Ω—É—Ç ‚Üí —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å scheduler

# 2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –≤ —á–∞—Å
curl http://localhost:8010/stats | jq '.posts_per_hour'
# –ï—Å–ª–∏ > 500 ‚Üí —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å scheduler

# 3. –ü—Ä–æ—Ü–µ–Ω—Ç failed –ø–æ—Å—Ç–æ–≤
curl http://localhost:8010/users/1/posts/tagging_stats | jq '.stats_by_status.failed'
# –ï—Å–ª–∏ > 5% ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å retry
```

---

## üîÄ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–µ–≥–∫–∏–π "—Ñ–æ–Ω–æ–≤—ã–π retry" –±–µ–∑ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ Celery:

### –í–∞—Ä–∏–∞–Ω—Ç 1: APScheduler (–ª–µ–≥–∫–∏–π scheduler)

```python
# background_retry_service.py
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from tagging_service import tagging_service

scheduler = AsyncIOScheduler()

# –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç - retry failed –ø–æ—Å—Ç–æ–≤
@scheduler.scheduled_job('interval', minutes=10)
async def retry_failed_posts():
    """–§–æ–Ω–æ–≤—ã–π retry –¥–ª—è failed –ø–æ—Å—Ç–æ–≤"""
    await tagging_service.retry_failed_posts(limit=50, force=False)

scheduler.start()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–µ—Ä
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (`pip install apscheduler`)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç Redis/RabbitMQ
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π retry –¥–ª—è —Å—Ç–æ–π–∫–∏—Ö –æ—à–∏–±–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
- ‚ö†Ô∏è –ù–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: Threading (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

```python
# –í parser_service.py
import threading

def async_retry_failed_posts():
    """–§–æ–Ω–æ–≤—ã–π retry –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    loop.run_until_complete(
        tagging_service.retry_failed_posts(limit=20)
    )

# –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
def start_background_retry():
    while True:
        time.sleep(900)  # 15 –º–∏–Ω—É—Ç
        thread = threading.Thread(target=async_retry_failed_posts)
        thread.start()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù—É–ª–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–µ—Ä
- ‚úÖ –ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º
- ‚ö†Ô∏è –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–æ—Ç–æ–∫–∞–º–∏

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Celery

```python
# tasks.py
from celery import Celery

app = Celery('telethon', broker='redis://redis:6379/0')

@app.task(bind=True, max_retries=5)
def generate_tags_task(self, post_id):
    """Celery –∑–∞–¥–∞—á–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤"""
    try:
        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤
        result = tagging_service.update_post_tags(post_id)
        return result
    except Exception as exc:
        # Retry —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç
        raise self.retry(exc=exc, countdown=300)

# docker-compose.yml
services:
  redis:
    image: redis:alpine
  
  celery-worker:
    build: ./telethon
    command: celery -A tasks worker --loglevel=info
    depends_on:
      - redis
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ì–∏–±–∫–∞—è –ª–æ–≥–∏–∫–∞ retry
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Flower
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –°–ª–æ–∂–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Redis, Worker)
- ‚ùå –û–≤–µ—Ä–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –¥–ª—è –º–∞–ª—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –≠—Ç–∞–ø 1: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–≤—ã –∑–¥–µ—Å—å ‚úÖ)
```
Immediate Retry + Fallback –º–æ–¥–µ–ª–∏
```
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** 1-20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, <500 –ø–æ—Å—Ç–æ–≤/—á–∞—Å

### –≠—Ç–∞–ø 2: –õ–µ–≥–∫–∏–π —Ñ–æ–Ω–æ–≤—ã–π retry (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```
Immediate Retry + APScheduler (—Ñ–æ–Ω–æ–≤—ã–π retry –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)
```
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** 20-50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 500-1000 –ø–æ—Å—Ç–æ–≤/—á–∞—Å

### –≠—Ç–∞–ø 3: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Task Queue (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```
Celery + Redis + Multiple Workers
```
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** 50+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 1000+ –ø–æ—Å—Ç–æ–≤/—á–∞—Å, SaaS

---

## üìù –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å APScheduler (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install apscheduler
```

### 2. –°–æ–∑–¥–∞—Ç—å background_retry_service.py

```python
import asyncio
import logging
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from tagging_service import tagging_service

logger = logging.getLogger(__name__)

class BackgroundRetryService:
    """–§–æ–Ω–æ–≤—ã–π retry –¥–ª—è failed –ø–æ—Å—Ç–æ–≤"""
    
    def __init__(self):
        self.scheduler = AsyncIOScheduler()
        self.enabled = tagging_service.enabled
        
    def start(self):
        """–ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ retry"""
        if not self.enabled:
            logger.info("BackgroundRetryService: –û—Ç–∫–ª—é—á–µ–Ω (–Ω–µ—Ç OPENROUTER_API_KEY)")
            return
        
        # Retry –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
        self.scheduler.add_job(
            self.retry_failed_posts,
            'interval',
            minutes=10,
            id='retry_failed_posts',
            name='Retry failed posts'
        )
        
        self.scheduler.start()
        logger.info("‚úÖ BackgroundRetryService: –ó–∞–ø—É—â–µ–Ω (retry –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)")
    
    async def retry_failed_posts(self):
        """Retry –¥–ª—è failed –ø–æ—Å—Ç–æ–≤"""
        try:
            logger.info("üîÑ BackgroundRetryService: –ó–∞–ø—É—Å–∫ retry –¥–ª—è failed –ø–æ—Å—Ç–æ–≤")
            await tagging_service.retry_failed_posts(limit=50, force=False)
        except Exception as e:
            logger.error(f"‚ùå BackgroundRetryService: –û—à–∏–±–∫–∞ retry: {str(e)}")

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
background_retry_service = BackgroundRetryService()
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –≤ main.py

```python
from background_retry_service import background_retry_service

@app.on_event("startup")
async def startup_event():
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    # –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ retry
    background_retry_service.start()
```

### 4. –î–æ–±–∞–≤–∏—Ç—å –≤ requirements.txt

```
apscheduler==3.10.4
```

### 5. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker compose -p localai up -d --build telethon
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Immediate retry –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ (–±—ã—Å—Ç—Ä–æ)
- ‚úÖ –§–æ–Ω–æ–≤—ã–π retry –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
- ‚úÖ –í—Å—ë –µ—â–µ –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (—Å–µ–π—á–∞—Å):

**‚úÖ –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ Immediate Retry**

–ü–æ—Ç–æ–º—É —á—Ç–æ:
- üéØ Self-hosted —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (1-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- üéØ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (~50 –ø–æ—Å—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
- üéØ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker Compose)
- üéØ 98% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- üéØ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Ç–µ–≥–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—ã)

### –ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª—å—à–µ:

**‚ö†Ô∏è –î–æ–±–∞–≤—å—Ç–µ APScheduler –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ retry**

–ö–æ–≥–¥–∞:
- –í—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞ > 2 –º–∏–Ω—É—Ç—ã
- –ò–ª–∏ > 10% –ø–æ—Å—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `retrying`
- –ò–ª–∏ > 100 –ø–æ—Å—Ç–æ–≤ –∑–∞ –ø–∞—Ä—Å–∏–Ω–≥

### –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤—ã—Ä–∞—Å—Ç–µ—Ç —Å–∏–ª—å–Ω–æ:

**üöÄ –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ Celery**

–ö–æ–≥–¥–∞:
- > 500 –ø–æ—Å—Ç–æ–≤ –≤ —á–∞—Å
- > 20 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù—É–∂–Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–ª–∞–¥–µ–Ω–∏—è

### Immediate Retry (—Ç–µ–∫—É—â–µ–µ)

```
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: 1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
–ü–∞–º—è—Ç—å: ~200MB
CPU: ~5% average
–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: ‚≠ê –ù–∏–∑–∫–∞—è
–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: 1 –¥–µ–Ω—å
```

### APScheduler (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: 1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
–ü–∞–º—è—Ç—å: ~250MB
CPU: ~7% average
–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: ‚≠ê‚≠ê –°—Ä–µ–¥–Ω—è—è
–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: +2 —á–∞—Å–∞
```

### Celery + Redis

```
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (app, worker, redis)
–ü–∞–º—è—Ç—å: ~500MB
CPU: ~15% average
–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: ‚≠ê‚≠ê‚≠ê‚≠ê –í—ã—Å–æ–∫–∞—è
–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: +2 –¥–Ω—è
```

---

## ‚úÖ –í—ã–≤–æ–¥

**Immediate Retry —Å fallback –º–æ–¥–µ–ª—è–º–∏** - —ç—Ç–æ:

‚úÖ **–ò–¥–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å** –¥–ª—è self-hosted –ø—Ä–æ–µ–∫—Ç–æ–≤  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ + –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** = 98% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å  
‚úÖ **–õ–µ–≥–∫–∞—è –æ—Ç–ª–∞–¥–∫–∞** –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** –¥–æ 20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π / 500 –ø–æ—Å—Ç–æ–≤ –≤ —á–∞—Å  

**Task Scheduler (Celery)** –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è:
- üè¢ SaaS –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å —Ç—ã—Å—è—á–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üåê –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- üìà –û–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—ã—Å—è—á –ø–æ—Å—Ç–æ–≤ –≤ —á–∞—Å

**–í–∞—à –≤—ã–±–æ—Ä Immediate Retry - –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!** üéâ

---

**–î–∞—Ç–∞:** 11 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** Telegram Channel Parser Team

