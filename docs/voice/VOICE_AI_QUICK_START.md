# 🚀 AI-классификатор голосовых команд - Быстрый старт

**⏱️ Время установки:** 5 минут

---

## ✅ Checklist установки

### 1. Импортировать workflow в n8n

```bash
# 1. Откройте n8n
http://localhost:5678

# 2. Нажмите "+" → "Import from File"
# 3. Выберите: n8n/workflows/voice_command_classifier.json
# 4. Нажмите "Import"
# 5. Активируйте workflow (переключатель в правом верхнем углу)
```

✅ Workflow импортирован и активен

---

### 2. Проверить настройки бота

В `telethon/.env` должны быть:

```bash
# Voice AI Classifier
VOICE_AI_CLASSIFIER_ENABLED=true
N8N_WEBHOOK_URL=http://n8n:5678
```

✅ Настройки корректны (уже добавлены автоматически)

---

### 3. Протестировать

**В Telegram:**

1. Отправьте голосовое **БЕЗ** команды:
   - "Что писали про нейросети?"
   
2. Ожидается:

```
✅ Распознано: "Что писали про нейросети?"

🤖 AI выбрал: /ask (95% уверенности)
🔍 Выполняю...

💡 Ответ: [ваш RAG ответ]
```

✅ AI-классификация работает!

---

## 🎯 Как использовать

### Вариант 1: AI автоматически выберет команду

```
User: [голосовое: "Что писали про AI?"]
Bot: 🤖 AI выбрал: /ask (95%)
     → Выполняет /ask автоматически
```

### Вариант 2: Выбрать команду заранее

```
User: /ask
User: [голосовое]
Bot: Выполняет /ask (без AI)
```

### Fallback: Если AI недоступен

```
User: [голосовое]
Bot: 🤔 Выберите команду:
     [💡 /ask] [🔍 /search]
```

---

## 🧪 Примеры классификации

| Голосовой запрос | AI выберет | Почему |
|-----------------|-----------|--------|
| "Что писали про нейросети?" | `/ask` | Вопрос требует RAG поиска |
| "Найди информацию о блокчейне" | `/search` | Информационный поиск |
| "Расскажи о квантовых компьютерах" | `/ask` | Генерация ответа из постов |
| "Где найти статьи про GPT?" | `/search` | Поиск источников |

---

## 🐛 Если что-то не работает

### ❌ "AI классификатор недоступен"

```bash
# Проверьте статус workflow
http://localhost:5678 → Workflows → Voice Command Classifier
# Должен быть ✅ Active

# Проверьте webhook
curl -X POST http://localhost:5678/webhook/voice-classify \
  -H "Content-Type: application/json" \
  -d '{"transcription": "test", "user_id": 1}'
```

### ❌ Всегда показываются кнопки (AI не используется)

```bash
# Проверьте переменную окружения
docker exec telethon env | grep VOICE_AI

# Должно быть:
VOICE_AI_CLASSIFIER_ENABLED=true

# Если нет - добавьте в telethon/.env и перезапустите
docker restart telethon
```

---

## 📚 Полная документация

Подробная настройка и troubleshooting:
- [VOICE_AI_CLASSIFIER_SETUP.md](./VOICE_AI_CLASSIFIER_SETUP.md)

---

**Готово!** 🎉 AI-классификатор настроен и работает!

**Следующий шаг:** Протестируйте разные голосовые запросы и проверьте точность классификации в логах:

```bash
docker logs telethon 2>&1 | grep "AI classification"
```

