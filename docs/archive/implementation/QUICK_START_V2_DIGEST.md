# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç V2 Adaptive Digest

**–î–∞—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç workflows –≤ n8n

---

## –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### 1. –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä—É–ø–ø–∞–º–∏

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–π—á–∞—Å:**

```
/group_digest
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. –ü–æ—è–≤—è—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã (–µ—Å–ª–∏ –≥—Ä—É–ø–ø –Ω–µ—Å–∫–æ–ª—å–∫–æ)
2. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã ‚Üí –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞: **2—á, 8—á, 12—á, 24—á**
3. –î–∞–π–¥–∂–µ—Å—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ò–ª–∏:**

```
/my_groups
```

–ü–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —Å –∫–Ω–æ–ø–∫–∞–º–∏ "üìä –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" - –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞!

### 2. –ö–æ–ø–∏—Ä—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º:
- `/add_group`
- `/group_settings`
- `/ask`
- `/search`
- –∏ —Ç.–¥.

### 3. –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ username

–í –¥–∞–π–¥–∂–µ—Å—Ç–∞—Ö `@username` —Ç–µ–ø–µ—Ä—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã - –Ω–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å.

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è V2 üìã

### V2 = –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã —Å —ç–º–æ—Ü–∏—è–º–∏

**5 —É—Ä–æ–≤–Ω–µ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**

| –°–æ–æ–±—â–µ–Ω–∏–π | –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç |
|-----------|---------|----------------|
| 1-5 | micro | –û–¥–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ + —ç–º–æ–¥–∑–∏ |
| 6-15 | minimal | –¢–µ–º—ã + —Ç–æ–Ω + –ø–∞—Ä–∞–≥—Ä–∞—Ñ |
| 16-50 | standard | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ + –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã + —ç–º–æ—Ü–∏–∏ |
| 51-100 | detailed | + —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è + —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ |
| >100 | comprehensive | + –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ + Neo4j |

**–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:**
- üòä –¢–æ–Ω –¥–∏–∞–ª–æ–≥–∞ (positive/neutral/negative)
- üé≠ –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏—è
- üìà –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞
- ‚ö° –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: –∫–æ–Ω—Ñ–ª–∏–∫—Ç, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, —Å—Ç—Ä–µ—Å—Å, —ç–Ω—Ç—É–∑–∏–∞–∑–º

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- ‚úÖ –†–µ—à–µ–Ω–∏—è
- ‚ùì –í–æ–ø—Ä–æ—Å—ã
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã
- ü§ù –î–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- üî¥ –†–∏—Å–∫–∏

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ V2 (–≤ n8n UI)

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç workflows

1. –û—Ç–∫—Ä—ã—Ç—å n8n: `http://your-domain:5678`

2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã (–≤ –ø–æ—Ä—è–¥–∫–µ):
   ```
   n8n/workflows/agent_dialogue_assessor.json
   n8n/workflows/agent_emotion_analyzer.json
   n8n/workflows/agent_key_moments.json
   n8n/workflows/agent_timeline.json
   n8n/workflows/agent_context_links.json
   n8n/workflows/agent_supervisor_synthesizer.json
   n8n/workflows/agent_topic_extractor.json      (REPLACE existing)
   n8n/workflows/agent_speaker_analyzer.json     (REPLACE existing)
   n8n/workflows/agent_summarizer.json           (REPLACE existing)
   n8n/workflows/group_digest_orchestrator_v2_sequential.json
   ```

3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - Settings ‚Üí Import from File
   - –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
   - –ù–∞–∂–∞—Ç—å Import
   - Activate workflow

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Orchestrator V2

1. –û—Ç–∫—Ä—ã—Ç—å workflow "Group Digest Orchestrator V2"

2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ Execute Workflow node –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
   - Node "1. Assessor" ‚Üí Select Workflow: "Agent: Dialogue Assessor"
   - Node "2. Topics" ‚Üí Select Workflow: "Agent: Topic Extractor"
   - Node "3. Emotions" ‚Üí Select Workflow: "Agent: Emotion Analyzer"
   - Node "4. Speakers" ‚Üí Select Workflow: "Agent: Speaker Analyzer"
   - Node "5. Summarizer" ‚Üí Select Workflow: "Agent: Context Summarizer"
   - Node "6. Key Moments" ‚Üí Select Workflow: "Agent: Key Moments Extractor"
   - Node "7. Timeline" ‚Üí Select Workflow: "Agent: Timeline Builder"
   - Node "8. Context Links" ‚Üí Select Workflow: "Agent: Context Links Analyzer"
   - Node "9. Synthesizer" ‚Üí Select Workflow: "Agent: Supervisor Synthesizer"

3. Save workflow

4. Activate workflow

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
/group_digest
‚Üí –í—ã–±—Ä–∞—Ç—å –≥—Ä—É–ø–ø—É
‚Üí –í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥
‚Üí –û–∂–∏–¥–∞—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç
```

**–õ–æ–≥–∏:**
```bash
docker logs telethon | grep "Pipeline:"
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: "Pipeline: V2 Sequential"

docker logs telethon | grep "Detail Level:"
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
```

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### V2 workflows –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã?

**–°–∏–º–ø—Ç–æ–º:** –î–∞–π–¥–∂–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç–∞—Ä–∞—è

**–†–µ—à–µ–Ω–∏–µ:** V1 pipeline –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!

**–û—Ç–∫–ª—é—á–∏—Ç—å V2 –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤–æ:**
```bash
# –í .env –∏–ª–∏ —á–µ—Ä–µ–∑ environment:
USE_DIGEST_V2=false

docker compose restart telethon
```

### Timeouts?

**–°–∏–º–ø—Ç–æ–º:** "n8n workflow timeout"

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å timeout
```bash
N8N_DIGEST_TIMEOUT_V2=240  # 4 –º–∏–Ω—É—Ç—ã

docker compose restart telethon
```

### –ü—É—Å—Ç—ã–µ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã?

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –î–ª—è —É—Ä–æ–≤–Ω–µ–π micro/minimal –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –Ω–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è.

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
- Inline keyboards –¥–ª—è /group_digest
- Inline keyboards –¥–ª—è /my_groups
- –ö–æ–ø–∏—Ä—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ @username

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ n8n:**
- –ò–º–ø–æ—Ä—Ç 10 –Ω–æ–≤—ã—Ö/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö workflows
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Execute Workflow nodes –≤ orchestrator v2

üìã **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è comprehensive level):**
- Neo4j integration
- Crawl4AI integration
- Searxng integration

---

## –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π UX** - `/group_digest` –∏ `/my_groups`

2. **–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –∫ V2:**
   - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å workflows –≤ n8n
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å orchestrator
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

3. **–ü–æ–∑–∂–µ (optional):**
   - –í–∫–ª—é—á–∏—Ç—å Neo4j –¥–ª—è comprehensive level
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Crawl4AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Å—ã–ª–æ–∫
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Searxng –¥–ª—è topic research

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ü–æ–ª–Ω–∞—è: `docs/groups/V2_ADAPTIVE_DIGEST_COMPLETE.md`
- n8n Guide: `n8n/workflows/V2_SEQUENTIAL_PIPELINE_GUIDE.md`
- Summary: `IMPLEMENTATION_SUMMARY_2025-10-14.md`

