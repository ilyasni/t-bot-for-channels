# ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –£–°–ü–ï–®–ù–ê - Telegram Groups Integration

**–î–∞—Ç–∞:** 15 —è–Ω–≤–∞—Ä—è 2025, 14:40 UTC  
**–°—Ç–∞—Ç—É—Å:** üéâ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### 1. ‚úÖ n8n Workflows v2 - –†–ê–ë–û–¢–ê–Æ–¢

**Mention Analyzer v2:**
```
‚úÖ HTTP 200
‚úÖ AI –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –í—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
‚úÖ –°—Ä–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (high/medium/low)
‚ö° –í—Ä–µ–º—è: ~5-8 —Å–µ–∫—É–Ω–¥
```

**Group Digest Multi-Agent v2:**
```
‚úÖ HTTP 200  
‚úÖ 4 AI –∞–≥–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç (Topic, Speaker, Summary, Aggregator)
‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –¢–µ–º—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (4 —Ç–µ–º—ã)
‚úÖ –°–ø–∏–∫–µ—Ä—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (3 —Å–ø–∏–∫–µ—Ä–∞)
‚úÖ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ–∑—é–º–µ –¥–∏–∞–ª–æ–≥–∞
‚ö° –í—Ä–µ–º—è: ~15-20 —Å–µ–∫—É–Ω–¥
```

### 2. ‚úÖ GroupMonitorService - –ó–ê–ü–£–©–ï–ù

```json
{
  "active_monitors": 0,
  "monitored_groups_total": 0,
  "users": []
}
```

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ (0 –º–æ–Ω–∏—Ç–æ—Ä–æ–≤ - –ø–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –¥–æ–±–∞–≤–∏–ª –≥—Ä—É–ø–ø—ã)

### 3. ‚úÖ Bot Commands - –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù–´

```
‚úÖ add_group_command
‚úÖ my_groups_command
‚úÖ group_digest_command
‚úÖ group_settings_command
```

### 4. ‚úÖ GigaChat Proxy - –†–ê–ë–û–¢–ê–ï–¢

```
‚úÖ http://gpt2giga-proxy:8090 –¥–æ—Å—Ç—É–ø–µ–Ω
‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
```

### 5. ‚úÖ Database - –ú–ò–ì–†–ê–¶–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–ê

```
‚úÖ groups          - —Å–æ–∑–¥–∞–Ω–∞
‚úÖ user_group      - —Å–æ–∑–¥–∞–Ω–∞
‚úÖ group_mentions  - —Å–æ–∑–¥–∞–Ω–∞
‚úÖ group_settings  - —Å–æ–∑–¥–∞–Ω–∞
```

---

## üß™ –†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤ Telegram –±–æ—Ç–µ)

### –¢–µ—Å—Ç 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã

```
/add_group https://t.me/your_test_group
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ì—Ä—É–ø–ø–∞ "–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" –¥–æ–±–∞–≤–ª–µ–Ω–∞!

üîî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
üìä –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /group_digest –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—é–º–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤

–ù–∞—Å—Ç—Ä–æ–π–∫–∏: /group_settings
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä—É–ø–ø

```
/my_groups
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –í–∞—à–∏ –≥—Ä—É–ø–ø—ã (1/2):

1. üü¢ –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
   üîî –£–ø–æ–º–∏–Ω–∞–Ω–∏—è | ID: -1001234567890

üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /group_settings –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

### –¢–µ—Å—Ç 3: –î–∞–π–¥–∂–µ—Å—Ç –¥–∏–∞–ª–æ–≥–∞

```
/group_digest 24
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–π–¥–∂–µ—Å—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã "–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"...
–ü–µ—Ä–∏–æ–¥: 24 —á–∞—Å–æ–≤

–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 20-30 —Å–µ–∫—É–Ω–¥ ‚è∞
```

–ß–µ—Ä–µ–∑ 20-30 —Å–µ–∫—É–Ω–¥ –ø–æ–ª—É—á–∏—Ç–µ:
```
# üìä –î–∞–π–¥–∂–µ—Å—Ç –≥—Ä—É–ø–ø—ã: –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
**–ü–µ—Ä–∏–æ–¥:** 24 hours
**–°–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:** 45

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:
1. Docker –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
2. PostgreSQL
3. n8n –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üë• –ê–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏:
‚Ä¢ @alice: –û–±—Å—É–∂–¥–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É Docker...
‚Ä¢ @bob: –ü—Ä–µ–¥–ª–∞–≥–∞–ª —Ä–µ—à–µ–Ω–∏—è...

## üìù –†–µ–∑—é–º–µ:
–û–±—Å—É–∂–¥–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤...

---
*–î–∞–π–¥–∂–µ—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω AI (GigaChat Multi-Agent) ‚Ä¢ 15.01.2025 14:40*
```

### –¢–µ—Å—Ç 4: –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–µ

**–í —Ç–µ—Å—Ç–æ–≤–æ–π –≥—Ä—É–ø–ø–µ –Ω–∞–ø–∏—à–∏—Ç–µ:**
```
@–≤–∞—à_username –ø–æ–º–æ–≥–∏ —Å –∑–∞–¥–∞—á–µ–π
```

**–ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥** –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üü° –í–∞—Å —É–ø–æ–º—è–Ω—É–ª–∏ –≤ –≥—Ä—É–ø–ø–µ: –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã

–ö–æ–Ω—Ç–µ–∫—Å—Ç: –û–±—Å—É–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã...
–ü–æ—á–µ–º—É —É–ø–æ–º—è–Ω—É–ª–∏: –ó–∞–ø—Ä–æ—Å –ø–æ–º–æ—â–∏...

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
‚Ä¢ –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –∑–∞–¥–∞—á–µ–π
‚Ä¢ –°—Ä–æ—á–Ω–æ—Å—Ç—å: medium

[–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é](https://t.me/...)

–°—Ä–æ—á–Ω–æ—Å—Ç—å: MEDIUM ‚Ä¢ 14:40
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|-----------|--------|--------|
| **n8n Workflows v2** | ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç | HTTP 200, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON |
| **GigaChat Proxy** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –î–æ—Å—Ç—É–ø–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–¥–µ–ª–∏ |
| **GroupMonitorService** | ‚úÖ –ó–∞–ø—É—â–µ–Ω | –ì–æ—Ç–æ–≤ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É |
| **Bot Commands** | ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã | 4 –∫–æ–º–∞–Ω–¥—ã –∞–∫—Ç–∏–≤–Ω—ã |
| **Database Tables** | ‚úÖ –°–æ–∑–¥–∞–Ω—ã | 4 —Ç–∞–±–ª–∏—Ü—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ |
| **Multi-Agent Pipeline** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 4 –∞–≥–µ–Ω—Ç–∞, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ |

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram

**–í –≤–∞—à–µ–º Telegram –±–æ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

1. **–î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –≥—Ä—É–ø–ø—É:**
   ```
   /add_group https://t.me/your_test_group
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫:**
   ```
   /my_groups
   ```

3. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–∞–π–¥–∂–µ—Å—Ç:**
   ```
   /group_digest 24
   ```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ:**
   - –í –≥—Ä—É–ø–ø–µ –Ω–∞–ø–∏—à–∏—Ç–µ: `@–≤–∞—à_username —Ç–µ—Å—Ç`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üìà Performance Metrics

**–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏–∑ —Ç–µ—Å—Ç–∞:**

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-------|-----------|
| Mention Analysis | 5-8 —Å–µ–∫ | ‚úÖ –£—Å–ø–µ—à–Ω–æ |
| Group Digest (6 msg) | 15-20 —Å–µ–∫ | ‚úÖ –£—Å–ø–µ—à–Ω–æ |
| Multi-Agent (4 agents) | 15-20 —Å–µ–∫ | ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ |

**–û–∂–∏–¥–∞–µ–º—ã–µ –¥–ª—è production:**

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|-------|------------|
| –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã | 2-5 —Å–µ–∫ | –ü–æ–ª—É—á–µ–Ω–∏–µ entity |
| Mention notification | <5 —Å–µ–∫ | Real-time |
| Digest (50 msg) | 15-20 —Å–µ–∫ | 4 –∞–≥–µ–Ω—Ç–∞ |
| Digest (200 msg) | 20-30 —Å–µ–∫ | –õ–∏–º–∏—Ç |

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n UI
2. Workflows ‚Üí "Group Dialogue Multi-Agent Analyzer v2"
3. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–π Agent node (1, 2, 3, –∏–ª–∏ 4)
4. –ò–∑–º–µ–Ω–∏—Ç–µ System Prompt –≤ messages
5. Save ‚Üí Test

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–∏–º–∏—Ç—ã

**–í `telethon/.env`:**
```bash
DIGEST_MAX_MESSAGES=100    # –£–º–µ–Ω—å—à–∏—Ç—å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
N8N_DIGEST_TIMEOUT=180     # –£–≤–µ–ª–∏—á–∏—Ç—å –µ—Å–ª–∏ timeout
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π Checklist

- [x] ‚úÖ n8n workflows v2 –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] ‚úÖ Workflows –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã
- [x] ‚úÖ Workflows –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (HTTP 200)
- [x] ‚úÖ GigaChat proxy —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] ‚úÖ GroupMonitorService –∑–∞–ø—É—â–µ–Ω
- [x] ‚úÖ Bot commands –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [x] ‚úÖ Database migration –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [x] ‚úÖ Multi-agent pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] üîú –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–æ–π (–≤–∞—à —à–∞–≥)
- [ ] üîú –¢–µ—Å—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ (–≤–∞—à —à–∞–≥)

---

## üöÄ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞!

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.**

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Å–≤–æ–µ–º Telegram –±–æ—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π `/add_group`

---

## üìû –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
# –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker logs telethon -f | grep GroupMonitor

# –°—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker exec telethon python -c "from group_monitor_service import group_monitor_service; print(group_monitor_service.get_status())"

# n8n executions
# –û—Ç–∫—Ä–æ–π—Ç–µ n8n UI ‚Üí Executions

# –¢–µ—Å—Ç webhooks
docker exec telethon python test_workflows.py
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- Quick Start: `telethon/docs/features/groups/GROUPS_QUICKSTART.md`
- Troubleshooting: —Å–º. —Ä–∞–∑–¥–µ–ª –≤ GROUPS_QUICKSTART.md

---

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!** üéâ

