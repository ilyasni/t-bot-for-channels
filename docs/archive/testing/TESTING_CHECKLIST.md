# üß™ –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è V2 Adaptive Digest

## ‚úÖ Pre-flight Check

```bash
cd /home/ilyasni/n8n-server/n8n-installer/n8n/workflows

# 1. –í—Å–µ workflows –≤–∞–ª–∏–¥–Ω—ã
for f in agent_*.json group_digest_orchestrator_v2_sequential.json; do
  python3 -m json.tool "$f" > /dev/null && echo "‚úÖ $f" || echo "‚ùå $f"
done

# 2. –ù–µ—Ç || –≤ jsonBody
grep " || " agent_*.json | grep "jsonBody" || echo "‚úÖ Clean"

# 3. Docker services running
docker ps | grep -E "(n8n|telethon|gpt2giga)" | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 3
```

---

## üìã Import Workflows –≤ n8n

1. **–ó–∞–π—Ç–∏ –≤ n8n UI:** `http://your-server:5678`

2. **Import workflows –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:**
   - ‚úÖ `agent_dialogue_assessor.json` (–ø–µ—Ä–≤—ã–º!)
   - ‚úÖ `agent_topic_extractor.json`
   - ‚úÖ `agent_emotion_analyzer.json`
   - ‚úÖ `agent_speaker_analyzer.json`
   - ‚úÖ `agent_key_moments.json`
   - ‚úÖ `agent_timeline.json`
   - ‚úÖ `agent_summarizer.json`
   - ‚úÖ `agent_supervisor_synthesizer.json`
   - ‚úÖ `group_digest_orchestrator_v2_sequential.json` (–ø–æ—Å–ª–µ–¥–Ω–∏–º!)

3. **Activate all workflows**

4. **–í orchestrator:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ `Execute Workflow` node:
   - –û—Ç–∫—Ä—ã—Ç—å node
   - –í—ã–±—Ä–∞—Ç—å workflow –∏–∑ dropdown
   - Save

---

## üß™ –¢–µ—Å—Ç 1: Micro Digest (1-5 —Å–æ–æ–±—â–µ–Ω–∏–π)

```bash
# Telegram ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É
/group_digest
‚Üí –í—ã–±—Ä–∞—Ç—å –º–∞–ª–æ–∞–∫—Ç–∏–≤–Ω—É—é –≥—Ä—É–ø–ø—É (–∏–ª–∏ test group —Å 2-3 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏)
‚Üí –í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥: 2—á –∏–ª–∏ 8—á

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
Detail Level: micro
–î–ª–∏–Ω–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞: 1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ + —ç–º–æ–¥–∑–∏
–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: <10s
```

**–ü—Ä–∏–º–µ—Ä output:**
```
üòä –ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –±–µ—Å–µ–¥–∞ –æ –ø–ª–∞–Ω–∞—Ö –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ.
```

---

## üß™ –¢–µ—Å—Ç 2: Minimal Digest (6-15 —Å–æ–æ–±—â–µ–Ω–∏–π)

```bash
/group_digest
‚Üí –í—ã–±—Ä–∞—Ç—å —Å—Ä–µ–¥–Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –≥—Ä—É–ø–ø—É
‚Üí –ü–µ—Ä–∏–æ–¥: 12—á

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
Detail Level: minimal
–î–ª–∏–Ω–∞: 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
–¢–µ–º—ã: 2-3
–í—Ä–µ–º—è: <20s
```

**–ü—Ä–∏–º–µ—Ä output:**
```
üìä –î–∞–π–¥–∂–µ—Å—Ç: 12 —á–∞—Å–æ–≤ | 8 —Å–æ–æ–±—â–µ–Ω–∏–π

üéØ –¢–µ–º—ã:
1. –ü–ª–∞–Ω—ã –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ
2. –ù–æ–≤—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω

üòä –¢–æ–Ω: –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π

–£—á–∞—Å—Ç–Ω–∏–∫–∏ –æ–±—Å—É–¥–∏–ª–∏ –ø–ª–∞–Ω—ã –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ...
```

---

## üß™ –¢–µ—Å—Ç 3: Standard Digest (16-50 —Å–æ–æ–±—â–µ–Ω–∏–π)

```bash
/group_digest
‚Üí –í—ã–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É
‚Üí –ü–µ—Ä–∏–æ–¥: 24—á

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
Detail Level: standard
–¢–µ–º—ã: 3-5 —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
–£—á–∞—Å—Ç–Ω–∏–∫–∏: —Ä–æ–ª–∏ –∏ –≤–∫–ª–∞–¥
–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã: —Ä–µ—à–µ–Ω–∏—è, –≤–æ–ø—Ä–æ—Å—ã
–í—Ä–µ–º—è: <45s
```

**–ü—Ä–∏–º–µ—Ä output:**
```
üìä –î–∞–π–¥–∂–µ—Å—Ç: Core Banking team | 24 —á–∞—Å–∞ | 35 —Å–æ–æ–±—â–µ–Ω–∏–π

üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã:
1. üî¥ –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ–±–≤—å—é (high)
2. ‚öôÔ∏è –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≤–∏—Ç—Ä–∏–Ω—ã (medium)
3. üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (low)

üòê –¢–æ–Ω: –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–æ–∑–∞–±–æ—á–µ–Ω–Ω—ã–π (0.55)
   –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞

üë• –ê–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏:
‚Ä¢ @–û–∫—Å–∞–Ω–∞: –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä, –≤—ã—è–≤–∏–ª–∞ –ø—Ä–æ–±–ª–µ–º—É
‚Ä¢ @–ò–≤–∞–Ω: –≠–∫—Å–ø–µ—Ä—Ç, –ø—Ä–µ–¥–ª–æ–∂–∏–ª —Ä–µ—à–µ–Ω–∏–µ

‚ö° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
‚úÖ –†–ï–®–ï–ù–ò–ï: –û—Ç–ª–æ–∂–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≤–µ–±–≤—å—é
   ...

üìù –†–µ–∑—é–º–µ:
–ö–æ–º–∞–Ω–¥–∞ –æ–±—Å—É–∂–¥–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º...
```

---

## üß™ –¢–µ—Å—Ç 4: Detailed Digest (51-100 —Å–æ–æ–±—â–µ–Ω–∏–π)

```bash
/group_digest
‚Üí –û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞
‚Üí –ü–µ—Ä–∏–æ–¥: 24—á

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
Detail Level: detailed
+ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–æ–π
+ –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è arc
–í—Ä–µ–º—è: <75s
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# 1. Telethon logs - Pipeline info
docker logs telethon 2>&1 | grep -E "(Pipeline|Detail Level|Token Budget)" | tail -20

# –û–∂–∏–¥–∞–µ–º–æ–µ:
# Pipeline: V2 Sequential
# Detail Level: standard
# Dialogue Type: problem_solving
# Token Budget - Topics: 400

# 2. n8n logs - Workflow execution
docker logs n8n 2>&1 | grep -E "(Enqueued|finished successfully|ERROR)" | tail -30

# 3. GigaChat proxy logs
docker logs gpt2giga-proxy 2>&1 | tail -20

# 4. Errors?
docker logs n8n 2>&1 | grep -i "error" | tail -10
docker logs telethon 2>&1 | grep "‚ùå" | tail -10
```

---

## ‚úÖ Success Criteria

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
- ‚úÖ –í—Å–µ workflows imported –∏ active
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "JSON parameter needs to be valid JSON"
- ‚úÖ max_tokens –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è
- ‚úÖ Dialogue Assessor –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π detail_level
- ‚úÖ –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π token_budget

### –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
- ‚úÖ **Micro:** –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫—Ä–∞—Ç–∫–∏–π (1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)
- ‚úÖ **Minimal:** –¢–µ–º—ã + –∫–æ—Ä–æ—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- ‚úÖ **Standard:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∏ –∫–ª—é—á–µ–≤—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ **Detailed:** –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è + —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞

### –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ–±—â–∏–π —Ç–æ–Ω (positive/neutral/negative)
- ‚úÖ –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∞–¥–µ–∫–≤–∞—Ç–Ω–æ
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (conflict, collaboration, stress) –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### Performance
- ‚úÖ Micro: <10s
- ‚úÖ Minimal: <20s
- ‚úÖ Standard: <45s
- ‚úÖ Detailed: <75s

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "Required property workflowId missing"
**–†–µ—à–µ–Ω–∏–µ:** –í orchestrator –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Execute Workflow node –≤—ã–±—Ä–∞—Ç—å workflow —á–µ—Ä–µ–∑ dropdown

### –û—à–∏–±–∫–∞: "JSON parameter needs to be valid JSON"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ HTTP Request nodes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `$json.max_tokens`, –∞ –Ω–µ `|| 400`

### –î–∞–π–¥–∂–µ—Å—Ç –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dialogue Assessor - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è messageCount –∏ detailLevel

### max_tokens –≤—Å–µ–≥–¥–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ assessment.token_budgets –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–∑ Dialogue Assessor

### –ê–≥–µ–Ω—Ç—ã –Ω–µ –≤–∏–¥—è—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥—Ä—É–≥ –¥—Ä—É–≥–∞
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É orchestrator - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å sequential, –Ω–µ parallel

---

## üìù –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| Test | Detail Level | Messages | Time | Status | Notes |
|------|-------------|----------|------|--------|-------|
| 1 | micro | 3 | ? | ‚è≥ | |
| 2 | minimal | 12 | ? | ‚è≥ | |
| 3 | standard | 35 | ? | ‚è≥ | |
| 4 | detailed | 75 | ? | ‚è≥ | |

---

## ‚úÖ Sign-off

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –õ–æ–≥–∏ —á–∏—Å—Ç—ã–µ (–Ω–µ—Ç errors)
- [ ] –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º
- [ ] Performance –≤ —Ä–∞–º–∫–∞—Ö –Ω–æ—Ä–º—ã
- [ ] –ì–æ—Ç–æ–≤–æ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª:** _____________  
**–î–∞—Ç–∞:** _____________  
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ / ‚úÖ –ì–æ—Ç–æ–≤–æ / ‚ùå –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

